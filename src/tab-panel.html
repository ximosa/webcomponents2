<link rel="import" href="../bower_components/polymer/polymer-element.html">

<dom-module id="wc-tabpanel">
<template>
    <style>
        :host {
            /*position: relative;*/
        }
    </style>
    <slot></slot>
</template>

<script>
    class WcTabPanel extends Polymer.Element {
        static get is() { return 'wc-tabpanel'; }


        static get config() {
            return {
                properties: {
                }
            };
        }

        connectedCallback() {
            super.connectedCallback();
            let self = this;
        }

    }

    // Register custom element definition using standard platform API
    customElements.define(WcTabPanel.is, WcTabPanel);
</script>
</dom-module>

<dom-module id="wc-tabnav">
<template>
    <style>        
        :host {
            display: block;
            border-bottom: 1px solid #ddd;
        }

        ::slotted(a) {
            display: inline-block;
            margin-bottom: -1px;
            padding: .5em 1em;
            border: 1px solid transparent;
            border-top-right-radius: .25rem;
            border-top-left-radius: .25rem;
        }

        ::slotted([active]) {
            color: #55595c;
            background-color: #fff;
            border-color: #ddd #ddd transparent;
        }
    </style>
    <slot></slot>
</template>

<script>
    class WcTabNav extends Polymer.Element {
        static get is() { return 'wc-tabnav'; }


        static get config() {
            return {
                properties: {
                }
            };
        }

        connectedCallback() {
            super.connectedCallback();
            let self = this;
            this.querySelectorAll('a').forEach(e => {
                e.addEventListener('click', function() {
                    let old = self.querySelector('[active]');
                    if(old) old.removeAttribute('active');
                    
                    this.setAttribute('active', true);
                    self.nextElementSibling.active = this.hash;
                });
            });
        }

    }

    // Register custom element definition using standard platform API
    customElements.define(WcTabNav.is, WcTabNav);
</script>
</dom-module>

<dom-module id="wc-tabcontent">
<template>
    <style>
        :host {
            display: block;
        }

        ::slotted(section) {
            opacity: 0;
            height: 0;
            width: 0;
            z-index: -1;
            pointer-events: none;
        }

        ::slotted(section.active) {
            opacity: 1;
            height: auto;
            width: 100%;
            z-index: 1;
            pointer-events: auto;
        }

        ::slotted(section.fade.active) {
            opacity: 1;
            transition: opacity .4s ease-out;
        }
    </style>
    <slot></slot>
</template>

<script>
    class WcTabContent extends Polymer.Element {
        static get is() { return 'wc-tabcontent'; }

        static get config() {
            return {
                properties: {
                    active: {
                        type: String,
                        observer: "_activeChanged"
                    }
                }
            };
        }

        _activeChanged(active) {
            let old = this.querySelector('.active');
            if(old) old.classList.remove('active');
            this.querySelector(active).classList.add('active');
        }
        connectedCallback() {
            super.connectedCallback();
            let self = this;
            let activated = this.previousElementSibling.querySelector('[active]');
            if(activated) this.active = activated.hash;
        }

    }

    // Register custom element definition using standard platform API
    customElements.define(WcTabContent.is, WcTabContent);
</script>
</dom-module>